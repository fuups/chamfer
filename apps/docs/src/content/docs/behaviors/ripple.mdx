---
title: Ripple
description: Progressive enhancement that provides immediate visual feedback when users press Chamfer buttons.
status: alpha
updated: "2025-01-07"
slug: /behaviors/ripple
---

import Callout from "@components/ui/Callout.astro";

Chamfer’s ripple mirrors the press feedback used in the playground demos: a wave originates where the user presses, fills the component while the pointer or key is held, then fades when the press completes. Buttons get this automatically through `enhanceButton`, and any other element can opt in by calling the exported `enhanceRipple` helper.

## Lifecycle

1. **Pointer or key down:** The helper ensures a `.ch-ripple > .ch-ripple__surface` container exists, toggles `is-pressed`, and animates the surface `::after` from the interaction point.
2. **Holding the press:** The ripple remains at full opacity until the user releases. Multiple simultaneous presses reuse the same pseudo-element but restart the animation.
3. **Pointer or key up:** The helper lets the animation finish, then clears `is-pressed` so the overlay fades away.
4. **Cancellation:** If the pointer is cancelled or keyboard focus moves away, the ripple exits immediately.

The ripple automatically disables when `prefers-reduced-motion: reduce` is active or when the page is in forced-colors mode.

## Usage

```ts
import { enhanceButton, enhanceRipple } from "@chamfer/behavior";

const destroy = enhanceButton(myButton, {
  ripple: true
});

// Optional clean-up when the button unmounts
destroy();
```

```html
<button data-ch-component="button">
  Save changes
</button>
```

```ts
// Generic usage: enhance an arbitrary element
import { enhanceRipple } from "@chamfer/behavior";

const destroyRipple = enhanceRipple(cardElement);
```

### Options

| Option | Type | Default | Notes |
| --- | --- | --- | --- |
| `ripple` | `boolean` | `true` | Disable per element with `data-ch-ripple="false"` or in code with `{ ripple: false }`. |

<Callout tone="tip">
  `enhanceButton` also normalises `type="button"`, augments keyboard handling for anchors, and guards disabled/loading states. Ripple is only one part of the helper. Reach for `enhanceRipple` when you want the effect without the button-specific affordances.
</Callout>

## Styling hooks

- `.ch-ripple` and `.ch-ripple__surface` are injected automatically and inherit the host border radius.
- Hover and press states toggle `is-hovered` / `is-pressed` on the surface, letting CSS handle the opacity changes.
- Customise the effect with CSS variables:
  - `--ch-ripple-color`
  - `--ch-ripple-hover-opacity`
  - `--ch-ripple-pressed-opacity`
  - `--ch-ripple-duration`
  - `--ch-ripple-easing`
  - `--ch-ripple-min-press`

```css
/* Scope a stronger wave to primary surfaces */
.surface-dark .ch-button--solid.ch-button--primary {
  --ch-ripple-color: color-mix(in oklab, #ffffff 85%, var(--ch-action-primary-bg) 15%);
  --ch-ripple-pressed-opacity: 0.26;
}

/* Disable ripple entirely for secondary actions */
.secondary-pane [data-ch-component="button"] {
  data-ch-ripple: false;
}

/* Apply ripple to a card */
.dashboard-card {
  position: relative;
  overflow: hidden;
  --ch-ripple-color: color-mix(in oklab, currentColor 40%, transparent);
  --ch-ripple-hover-opacity: 0.05;
  --ch-ripple-pressed-opacity: 0.18;
}
```

See the [Theming recipes guide](/guides/theming-recipes#adjust-ripple-strength) for more examples.

## Accessibility

- Respects `prefers-reduced-motion: reduce`. No ripple renders, and press feedback falls back to native active states.
- Suppresses the effect for `@media (forced-colors: active)`.
- Keyboard users trigger the same lifecycle—Space begins the ripple on keydown and releases it on keyup.
- Works with buttons rendered as anchors (`role="button"`, `tabindex="0"`) as long as the correct semantics are applied.

## Disabling ripple

- Add `data-ch-ripple="false"` to an individual button.

```html
<button data-ch-component="button" data-ch-ripple="false">
  Plain action
</button>
```

- Pass `{ ripple: false }` when calling `enhanceButton`.
- Toggle the attribute in code when specific surfaces or themes should opt out:

```ts
document
  .querySelectorAll('[data-theme="low-motion"] [data-ch-component="button"]')
  .forEach((button) => {
    button.dataset.chRipple = "false";
  });
```

## Related resources

- [Behaviors overview](./index)
- [Button component documentation](/components/button)
- [Theming recipes guide](/guides/theming-recipes)
