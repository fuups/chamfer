---
import DocsLayout from "@layouts/DocsLayout.astro";
import { getCollection } from "astro:content";

const docs = await getCollection("docs");
const foundations = docs
  .filter(entry => entry.id.startsWith("foundations/"))
  .sort((a, b) => a.id.localeCompare(b.id));
const components = docs.filter(entry => entry.id.startsWith("components/"));
---

<DocsLayout title="Chamfer UI" description="Framework-agnostic components, tokens, and guides.">
  <section class="hero">
    <div class="hero__content">
      <h1>Chamfer UI Documentation</h1>
      <p>
        Build accessible, token-driven interfaces with Chamferâ€™s framework-agnostic components. Start with the quick
        start guide or explore the component library.
      </p>
      <div class="hero__cta">
        <a class="primary" href="/foundations/quick-start">Get Started</a>
        <a class="secondary" href="/components/button">Browse Components</a>
      </div>
    </div>
  </section>

  <section class="grid" id="components">
    <article class="card">
      <header>
        <h2>Foundations</h2>
        <p>Principles, tokens, accessibility, and tooling guidance.</p>
      </header>
      <ul>
        {foundations.map(entry => (
          <li>
            <a href={entry.slug}>{entry.data.title}</a>
            <p>{entry.data.description}</p>
          </li>
        ))}
      </ul>
    </article>

    <article class="card">
      <header>
        <h2>Components</h2>
        <p>HTML baselines, behavior notes, and framework adapters for each component.</p>
      </header>
      <ul>
        {components.map(entry => (
          <li>
            <a href={entry.slug}>{entry.data.title}</a>
            <p>{entry.data.description}</p>
          </li>
        ))}
      </ul>
    </article>
  </section>
</DocsLayout>

<style>
  .hero {
    padding: var(--ch-space-4xl, 3rem) var(--ch-space-xl, 1.5rem) var(--ch-space-3xl, 2.5rem);
    text-align: center;
  }

  .hero__content {
    max-width: 760px;
    margin: 0 auto;
    display: grid;
    gap: var(--ch-space-lg, 1.5rem);
  }

  .hero__content h1 {
    margin: 0;
    font-size: clamp(2rem, 4vw, 2.5rem);
  }

  .hero__content p {
    margin: 0;
    color: var(--ch-text-secondary, rgba(90, 97, 105, 0.88));
  }

  .hero__cta {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--ch-space-md, 1rem);
    flex-wrap: wrap;
  }

  .hero__cta a {
    display: inline-flex;
    align-items: center;
    gap: var(--ch-space-xs, 0.35rem);
    padding: var(--ch-space-sm, 0.65rem) var(--ch-space-lg, 1.5rem);
    border-radius: var(--ch-radius-pill, 999px);
    font-weight: var(--ch-weight-medium, 500);
    text-decoration: none;
  }

  .hero__cta .primary {
    background: var(--ch-action-primary-bg, #212529);
    color: var(--ch-action-primary-fg, #ffffff);
  }

  .hero__cta .secondary {
    border: var(--ch-border-width-sm, 1px) solid var(--ch-border-default, rgba(0, 0, 0, 0.12));
    color: var(--ch-text-secondary, rgba(90, 97, 105, 0.88));
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: var(--ch-space-2xl, 2rem);
    max-width: 1100px;
    margin: 0 auto var(--ch-space-4xl, 3rem);
    padding: 0 var(--ch-space-xl, 1.5rem);
  }

  .card {
    display: grid;
    gap: var(--ch-space-lg, 1.5rem);
  }

  .card header h2 {
    margin: 0 0 var(--ch-space-xs, 0.25rem);
  }

  .card header p {
    margin: 0;
    color: var(--ch-text-secondary, rgba(90, 97, 105, 0.88));
  }

  .card ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: var(--ch-space-md, 1rem);
  }

  .card li a {
    font-weight: var(--ch-weight-semibold, 600);
    color: var(--ch-text-primary, #212529);
    text-decoration: none;
  }

  .card li p {
    margin: var(--ch-space-xs, 0.25rem) 0 0;
    color: var(--ch-text-secondary, rgba(90, 97, 105, 0.88));
  }
</style>
