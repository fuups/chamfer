---
import DocsLayout from "@layouts/DocsLayout.astro";
import { getEntry } from "astro:content";

const entry = await getEntry("docs", "components/button");
const { Content, headings } = await entry.render();
---

<DocsLayout title={entry.data.title} description={entry.data.description}>
  <div class="content-grid">
    <article>
      <header class="article-header">
        <nav aria-label="Breadcrumb" class="breadcrumb">
          <a href="/">Docs</a>
          <span aria-hidden="true">/</span>
          <a href="/#components">Components</a>
          <span aria-hidden="true">/</span>
          <span>{entry.data.title}</span>
        </nav>
        <h1>{entry.data.title}</h1>
        <p>{entry.data.description}</p>
        <dl class="meta">
          <div>
            <dt>Status</dt>
            <dd class={`status status--${entry.data.status}`}>{entry.data.status}</dd>
          </div>
          {entry.data.updated && (
            <div>
              <dt>Last updated</dt>
              <dd>{entry.data.updated}</dd>
            </div>
          )}
        </dl>
      </header>
      <Content />

      <footer class="article-footer">
        <h2>Next steps</h2>
        <ul>
          <li><a href="/foundations/tokens">Review token layering and theming overrides</a></li>
          <li><a href="/foundations/accessibility">Validate against the accessibility baseline</a></li>
          <li><a href="/foundations/tooling">Set up the recommended build workflow</a></li>
        </ul>
      </footer>
    </article>

    <aside class="toc">
      <h2>On this page</h2>
      <ul>
        {headings
          .filter(heading => heading.depth === 2)
          .map(heading => (
            <li>
              <a href={`#${heading.slug}`}>{heading.text}</a>
            </li>
          ))}
      </ul>
    </aside>
  </div>
</DocsLayout>

<style>
  .content-grid {
    display: flex;
    align-items: flex-start;
    gap: var(--ch-space-2xl, 2rem);
    width: 100%;
    max-width: 1100px;
    margin: 0 auto;
  }

  article {
    flex: 1 1 0;
    max-width: 820px;
    display: grid;
    gap: var(--ch-space-xl, 1.5rem);
  }

.toc {
  flex: 0 0 240px;
  position: sticky;
  top: var(--ch-space-2xl, 2rem);
  align-self: flex-start;
}

  @media (max-width: 1024px) {
    .content-grid {
      flex-direction: column;
    }

    .toc {
      width: 100%;
      position: static;
      border-top: var(--ch-border-width-sm, 1px) solid var(--ch-border-default, rgba(0, 0, 0, 0.12));
      padding-top: var(--ch-space-lg, 1.5rem);
    }
  }

  .breadcrumb {
    display: inline-flex;
    align-items: center;
    gap: var(--ch-space-xs, 0.35rem);
    font-size: var(--ch-text-xs, 0.75rem);
    color: var(--ch-text-tertiary, rgba(90, 97, 105, 0.68));
    margin-bottom: var(--ch-space-sm, 0.5rem);
  }

  .breadcrumb a {
    color: inherit;
    text-decoration: none;
  }

  .article-header > h1 {
    margin-bottom: var(--ch-space-sm, 0.5rem);
    font-size: var(--ch-text-xl, 1.5rem);
  }

  .article-header > p {
    margin: 0;
    color: var(--ch-text-secondary, rgba(90, 97, 105, 0.88));
  }

  .meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--ch-space-lg, 1rem);
    margin: var(--ch-space-md, 1rem) 0 0;
  }

  .meta dt {
    font-size: var(--ch-text-xs, 0.75rem);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--ch-text-tertiary, rgba(90, 97, 105, 0.68));
  }

  .meta dd {
    margin: 0;
    font-weight: var(--ch-weight-medium, 500);
  }

  .status {
    display: inline-flex;
    align-items: center;
    gap: var(--ch-space-xs, 0.25rem);
    padding: 0 var(--ch-space-sm, 0.5rem);
    border-radius: var(--ch-radius-pill, 999px);
    background: var(--ch-action-secondary-soft-bg, rgba(15, 163, 177, 0.14));
    color: var(--ch-action-secondary-soft-fg, #0c727c);
  }

  .status--alpha {
    background: var(--ch-action-warning-soft-bg, rgba(217, 161, 0, 0.14));
    color: var(--ch-action-warning-soft-fg, #7f6000);
  }

  .status--beta {
    background: var(--ch-action-secondary-soft-bg, rgba(15, 163, 177, 0.14));
    color: var(--ch-action-secondary-soft-fg, #0c727c);
  }

  .status--stable {
    background: var(--ch-action-success-soft-bg, rgba(53, 133, 70, 0.12));
    color: var(--ch-action-success-soft-fg, #1f6134);
  }

  .toc h2 {
    font-size: var(--ch-text-sm, 0.875rem);
    margin-bottom: var(--ch-space-sm, 0.5rem);
  }

  .toc ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: var(--ch-space-xs, 0.25rem);
  }

  .toc a {
    text-decoration: none;
    color: var(--ch-text-secondary, rgba(90, 97, 105, 0.88));
  }

  .article-footer {
    border-top: var(--ch-border-width-sm, 1px) solid var(--ch-border-default, rgba(0, 0, 0, 0.12));
    padding-top: var(--ch-space-lg, 1.5rem);
    display: grid;
    gap: var(--ch-space-md, 1rem);
  }

  .article-footer ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: var(--ch-space-sm, 0.75rem);
  }

  .article-footer a {
    text-decoration: none;
    color: var(--ch-action-primary-bg, #212529);
    font-weight: var(--ch-weight-medium, 500);
  }
</style>
